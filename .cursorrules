Проект: личный Telegram AI-ассистент "Маркус".
Суть: личный проактивный помощник с долгосрочной памятью, задачами, напоминаниями, голосом и веб-ресерчем.
Стек: Next.js 14 (App Router, TypeScript), grammy, OpenRouter (DeepSeek V3.2), Supabase (Postgres + pgvector).
Интерфейс: только Telegram.

Общие правила:
- Все ответы и тексты для пользователя на русском языке.
- Весь код документировать (docstrings для функций/классов).
- Логировать все ошибки на сервере (структурированно).
- Безопасность данных обязательна: валидация входа, защита вебхука, секреты только в env.
- Следить за временем: всегда работать в корректной таймзоне пользователя (по умолчанию Europe/Moscow).
- Делать ресерч и граундинг при фактических утверждениях.
- Оптимизация важна (токены, latency, DB запросы).
- Критичные потоки покрывать автотестами.

Модульные правила в .cursor/rules/*.mdc:
- project.mdc: контекст и цели
- backend.mdc: серверная архитектура, безопасность, логирование
- testing.mdc: тесты и критерии качества
